{% extends "base.html" %}
{% block title %}Pacotes{% endblock %}
{% block content %}
<div class="flex justify-between items-center mb-4">
  <h2 class="text-2xl font-bold text-indigo-600">Pacotes</h2>
  {% if current_user.is_authenticated and current_user.perfil == 'administrador' %}
  <a href="{{ url_for('cadastrar_pacote') }}" class="px-4 py-2 bg-green-600 text-white rounded">+ Novo Pacote</a>
  {% endif %}
</div>
<div class="bg-white rounded shadow overflow-hidden">
<table class="min-w-full divide-y divide-gray-200">
  <thead class="bg-gray-50">
    <tr>
      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Destino</th>
      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Período</th>
      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Preço</th>
      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Vagas</th>
      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Ações</th>
    </tr>
  </thead>
  <tbody class="bg-white divide-y divide-gray-200">
    {% for p in pacotes %}
    <tr>
      <td class="px-6 py-4 whitespace-nowrap">{{ p.destino }}</td>
      <td class="px-6 py-4 whitespace-nowrap">{{ p.periodo }}</td>
      <td class="px-6 py-4 whitespace-nowrap">R$ {{ '%.2f'|format(p.preco) }}</td>
      <td class="px-6 py-4 whitespace-nowrap">{{ p.vagas_disponiveis }} / {{ p.vagas_max }}</td>
      <td class="px-6 py-4 whitespace-nowrap">
        <div class="flex space-x-2">
          <a href="{{ url_for('nova_reserva', pacote_id=p.id) }}" class="text-indigo-600">Reservar</a>
          {% if current_user.perfil == 'administrador' %}
          <a href="{{ url_for('editar_pacote', id=p.id) }}" class="text-gray-600">Editar</a>
          <form method="POST" action="{{ url_for('excluir_pacote', id=p.id) }}" onsubmit="return confirm('Excluir pacote?');">
            <button type="submit" class="text-red-600">Excluir</button>
          </form>
          {% endif %}
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</div>
{% endblock %}
